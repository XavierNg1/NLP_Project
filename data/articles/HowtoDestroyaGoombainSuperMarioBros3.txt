 Most Goombas on ledges just go back and forth the length of the ledge. Get underneath one of the blocks of the ledge that you can break.
 As soon as the Goomba is on the block Mario is underneath of, jump (A for NES/DS/Emulator; 2 for Wii/U). This will effectively destroy the Goomba.

